<!DOCTYPE html>
<html>

<head>
    <title>SAVER MAP</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <!-- OpenLayers CSS -->
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css"
        integrity="sha256-jckPZk66EJrEBQXnJ5QC2bD+GxWPDRVVoMGr5vrMZvM=" crossorigin="anonymous">

    <!-- OpenLayers JS -->
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"
        integrity="sha256-77dogUPZ1WVoK9BDF0CxsKnAouX3YzK6n4tIcbDgtFI=" crossorigin="anonymous"></script>


    <!-- Map metadata generated by uNmINeD -->
    <script type="text/javascript" src="unmined.map.properties.js"></script>
    <script type="text/javascript" src="unmined.map.regions.js"></script>
    <script type="text/javascript" src="unmined.map.players.js"></script>

    <!-- Custom markers -->
    <script type="text/javascript" src="custom.markers.js"></script>

    <!-- uNmINeD JS -->
    <script type="text/javascript" src="unmined.openlayers.js"></script>

    <!-- 아이콘 -->
    <script src="https://kit.fontawesome.com/dbb41a74f1.js" crossorigin="anonymous"></script>

    <style type="text/css">
        @font-face {
            font-family: 'YClover-Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_231029@1.1/YClover-Bold.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        header {
            display: flex;
            flex-flow: column wrap;
            justify-content: center;
            align-content: center;
            height: auto;
            position: relative; /* 부모 요소에 position을 추가합니다. */
        }

        header div {
            margin: 0px;
            display: flex; /* 내부 요소들을 가로로 정렬하기 위해 flex를 사용합니다. */
            justify-content: center;
            align-items: center; /* 내부 요소들을 세로로 중앙 정렬합니다. */
        }

        header div div {
            padding: 7px 0 0 0;
            font-family: 'YClover-Bold';
            font-size: 1.5em;
            color: #3CB371;
            text-align: center;
        }

        header div img {
            z-index: 3;
            position: absolute;
            width: 20px;
            left: 15px;
            cursor: pointer;
        }

        header #search-window{
            width: calc(100% - 10px);
            box-sizing: border-box;
            height: 30px;
            margin: 5px;
            padding: 0 10px;
            background-color: #F2F3F5;
            border: none;
            outline: none;
        }

        .sub-menu {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0,-50%);
            width: 200px;
            height: 100%;
            background-color: white;
            display: none; /* 초기에는 보이지 않도록 설정합니다. */
            z-index: 2; /* 배경에 가려지지 않도록 z-index를 설정합니다. */
        }

        #iconBox{
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .icon{
            font-size: 2.5rem;
            color: black;
            text-decoration: none;
        }
        .no_dot {
            margin: 20px;
            padding: 0;
            list-style-type: none;
        }
        .no_dot li{
            display: inline-block; 
        }

        /* 추가된 스타일 */
        .dark-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* 투명한 검은색 배경 */
            z-index: 1; /* 배경 위로 올려서 보이도록 합니다. */
            display: none; /* 초기에는 숨깁니다. */
        }

        #map {
            height: calc(100% - 78px);
            width: 100%;
            image-rendering: pixelated;
        }

        .mouseposition {
            background-color: white;
            padding: 3px;
            text-align: right;
        }

        .mousepositioncoord {
            min-width: 40px;
            display: inline-block;
        }

        div.ol-mouse-position {
            background-color: white;
            padding: 6px;
            border-radius: 3px;
            box-shadow: 3px 3px 2px rgba(0, 0, 0, 0.2);
        }
    </style>

</head>

<body>
    <header>
        <div>
            <img src="images/menu.png" alt="메뉴" id="menuBtn">
            <div>SAVER MAP</div>
        </div>
        <input type="text" id="search-window" name="q" placeholder="장소, 주소, 버스 검색">
    </header>

    <div id="map"></div>
    
    <script type="text/javascript">

        //document.title = UnminedMapProperties.worldName + " - " + document.title;

        if (UnminedCustomMarkers && UnminedCustomMarkers.isEnabled && UnminedCustomMarkers.markers) {
            UnminedMapProperties.markers = UnminedMapProperties.markers.concat(UnminedCustomMarkers.markers);
        }

        let unmined = new Unmined();

        if (UnminedPlayers && UnminedPlayers.length > 0) {
            UnminedMapProperties.markers = UnminedMapProperties.markers.concat(unmined.createPlayerMarkers(UnminedPlayers));
        }

        unmined.map('map', UnminedMapProperties, UnminedRegions);

    </script>

    <!-- 보조메뉴 -->
    <div class="sub-menu" id="subMenu" style="display: none;">
        <div id="iconBox">
            <ul class="no_dot">
                <li><a href="https://github.com/mintsclover/map" class="icon fa-brands fa-github" target="_blank"></a></li>
                <li><a href="https://mintsclover.com/" class="icon fa-solid fa-house" target="_blank"></a></li>
            </ul>
        </div>
    </div>

    <!-- 다크오버레이 -->
    <div class="dark-overlay" id="overlay"></div>

    <script>
        // 이미지 클릭 시 보조 메뉴창 표시/숨기기
        document.getElementById('menuBtn').addEventListener('click', function() {
            var subMenu = document.getElementById('subMenu');
            var overlay = document.getElementById('overlay');

            // 보조 메뉴창의 표시 여부를 토글합니다.
            if (subMenu.style.display === 'none') {
                subMenu.style.display = 'block';
                overlay.style.display = 'block'; // 배경 오버레이를 보이도록 합니다.
            } else {
                subMenu.style.display = 'none';
                overlay.style.display = 'none'; // 배경 오버레이를 숨깁니다.
            }
        });
    </script>
</body>

</html>